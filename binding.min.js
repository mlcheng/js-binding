"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var iqwerty=iqwerty||{};iqwerty.binding=function(){function t(e,n,o){o instanceof Array||(o=[o]),t.prototype.setId(e),t.prototype.updateBindings(e[r],n,o,e[n]),t.prototype.updateViews(e[r],n),o.forEach(function(t){"input"===t.tagName.toLowerCase()&&t.addEventListener("input",function(){e[n]=t.value})}),Object.defineProperty(e,n,{get:function(){return t.prototype.Bindings[e[r]][n].value},set:function(o){t.prototype.Bindings[e[r]][n].value=o,t.prototype.updateViews(e[r],n)},configurable:!0})}function e(e){setTimeout(function(){var n=document.querySelectorAll("["+a+"]");0!==n.length&&([].slice.call(n).forEach(function(n){var o=n.dataset.iqBind;if(o=new RegExp(u).exec(o)){var r=o[1],i=e[r];t(i,o[2],n),o=null,r=null,i=null}}),n=null)},0)}function n(e){setTimeout(function(){var n=document.querySelectorAll("["+l+"]");0!==n.length&&([].slice.call(n).forEach(function(n){var o=n.dataset.iqBindScope,r="{ *?"+(o?i:u)+" *?}";r=new RegExp(r,"g");var a,l=[];do a=r.exec(n.innerHTML),a&&l.push({matched:a[0],obj:o||a[1],prop:o?a[1]:a[2],id:p+"-"+t.prototype.getId()});while(a);a=null,l.forEach(function(t){var e=document.createElement("span");e.classList.add(p),e.id=t.id,n.innerHTML=n.innerHTML.replace(t.matched,e.outerHTML),e=null}),l.forEach(function(n){var o=e[n.obj],r=document.getElementById(n.id);t(o,n.prop,r),r.removeAttribute("id"),o=null,r=null}),o=null,r=null,l=null}),n=null)},0)}function o(o){Object.keys(o).forEach(function(e){t.prototype.setId(o[e]),t.prototype.addBinding(o[e])}),e(o),n(o)}var r="$$id",i="([^.]+)",u=i+"."+i,a="data-iq-bind",l="data-iq-bind-scope",p="iq-bind";return t.prototype.Bindings={},t.prototype.addBinding=function(e){var n=t.prototype.Bindings;n[e[r]]||(n[e[r]]={},n=null)},t.prototype.updateBindings=function(e,n,o,r){var i,u=t.prototype.Bindings;u[e]||(u[e]={}),u[e][n]||(u[e][n]={elems:[],value:r}),(i=u[e][n].elems).push.apply(i,_toConsumableArray(o)),u=null},t.prototype.updateViews=function(e,n){var o,r=t.prototype.Bindings[e][n].elems;r.forEach(function(r){o="input"===r.tagName.toLowerCase()?"value":"innerHTML",r[o]=t.prototype.Bindings[e][n].value}),r=null,o=null},t.prototype._id=0,t.prototype.getId=function(){return t.prototype._id++},t.prototype.setId=function(e){null==e[r]&&Object.defineProperty(e,r,{value:t.prototype.getId()})},{Bind:t,Model:o}}();