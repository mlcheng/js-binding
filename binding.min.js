"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)}function _defineProperty(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var _slicedToArray=function(){function r(r,n){var e=[],t=!0,i=!1,o=void 0;try{for(var a,f=r[Symbol.iterator]();!(t=(a=f.next()).done)&&(e.push(a.value),!n||e.length!==n);t=!0);}catch(c){i=!0,o=c}finally{try{!t&&f["return"]&&f["return"]()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),iqwerty=iqwerty||{};iqwerty.binding=function(){function r(r){G.hasOwnProperty(r[D])||(G[r[D]]={})}function n(r,n){var e;G[r[D]].hasOwnProperty(n)||(G[r[D]][n]=(e={},_defineProperty(e,w,r[n]),_defineProperty(e,L,[]),_defineProperty(e,O,[]),e))}function e(r,n,e,t){var i=G[r[D]][n];if(e&&e.forEach(function(e){var t=f(r,n,e[T]);if(t){var o;e[x]=e[x].filter(function(r){return~~t[x].indexOf(r)}),t[x]=(o=t[x]).concat.apply(o,_toConsumableArray(e[x]))}else{var a;i[L]=i[L].concat((a={},_defineProperty(a,T,e[T]),_defineProperty(a,x,e[x]),a));var c=Object.keys(W).find(function(r){return!!e[T].parentElement.querySelector(r)});c&&W[c][S].forEach(function(t){e[T].addEventListener(t,function(){r[n]=e[T][W[c][w]]})}),d(e[T])}}),t){var o;i[O]=(o=i[O]).concat.apply(o,_toConsumableArray(t))}}function t(r,n,e){G[r[D]][n][w]=e}function i(r,n){return G[r[D]][n][w]}function o(r,n,e){G[r[D]][n][L].forEach(function(r){r[x].forEach(function(n){r[T][n]!==e&&(r[T][n]=e)})})}function a(r,n,e,t){e!==t&&G[r[D]][n][O].forEach(function(r){r(e,t)})}function f(r,n,e){return G[r[D]][n][L].find(function(r){return r[T]===e})}function c(r){r.hasOwnProperty(D)||(r[D]=F++)}function u(r,n){c(n),J[r]=n}function y(r){return J[r]}function l(r,n){Object.defineProperty(r,n,{get:function(){return i(r,n)},set:function(e){var f=i(r,n);t(r,n,e),o(r,n,e),a(r,n,e,f)}})}function d(r){r.classList.add(H)}function p(r){r.classList.remove(k)}function s(r,n){return Array.from(n.querySelectorAll("*")).find(function(n){return!n.firstElementChild&&n.textContent===r})||n}function v(r){var n=r.dataset.iqBind,e="{ *?"+(n?R:I)+" *?}",t=r.innerHTML;t=t.replace(new RegExp(e,"g"),function(n){var e=s(n,r);return e.classList.contains(k)?n:'<span class="'+k+'">'+n+"</span>"}),r.innerHTML!==t&&(r.innerHTML=t)}function h(r){var n=r.dataset.iqBind,e="{ *?"+(n?R:I)+" *?}",t=r.querySelectorAll("."+k);return Array.from(t).map(function(r){var t,i,o=new RegExp(e,"g"),a=o.exec(r.innerHTML),f=y(n||a[1].trim());if(f)return p(r),i={},_defineProperty(i,M,f),_defineProperty(i,j,n?a[1].trim():a[2].trim()),_defineProperty(i,L,(t={},_defineProperty(t,T,r),_defineProperty(t,x,["innerHTML"]),t)),i})}function _(){var r=document.querySelectorAll("["+B+"]:not(."+H+")");Array.from(r).forEach(function(r){var n=r.dataset.iqBindTo.split(";");n.forEach(function(n){var e,t=n.split(":"),i=t[0].split(",");i=i.map(function(r){return r.trim()});var o=t[1].split("."),a=_slicedToArray(o,2),f=a[0],c=a[1],u=y(f);u&&m(u,c,(e={},_defineProperty(e,T,r),_defineProperty(e,x,i),e))})})}function P(){var r=document.querySelectorAll("["+C+"]");Array.from(r).forEach(function(r){var n=r.dataset.iqBind.split("."),e=_slicedToArray(n,2),t=e[0],i=e[1];if(i){var o;if(r.classList.contains(""+H))return;var a=y(t);if(!a)return;m(a,i,(o={},_defineProperty(o,T,r),_defineProperty(o,x,["innerHTML"]),o))}else{if(r.querySelector("."+H)&&!r.querySelector("."+k))return;v(r);var f=z(h(r));f.forEach(function(r){m(r[M],r[j],r[L])})}})}function m(t,i,a,f){a=Array.isArray(a)?a:z([a]),f=Array.isArray(f)?f:z([f]),c(t),r(t),n(t,i),e(t,i,a,f),l(t,i),o(t,i,t[i])}function A(r,n,e){m(r,n,null,e)}function b(n){Object.keys(n).forEach(function(e){u(e,n[e]),r(n[e])}),"undefined"!=typeof document&&(_(),P())}var q,g,E,w="value",L="bindings",T="el",x="attrs",O="watchers",S="changer",M="obj",j="prop",H="iq-binding",k="iq-binding-incomplete",B="data-iq-bind-to",C="data-iq-bind",R="([^.}]+)",I=R+"."+R,W={"input:not([type=checkbox])":(q={},_defineProperty(q,S,["change","input"]),_defineProperty(q,w,"value"),q),"input[type=checkbox]":(g={},_defineProperty(g,S,["change","input"]),_defineProperty(g,w,"checked"),g),textarea:(E={},_defineProperty(E,S,["change","input"]),_defineProperty(E,w,"value"),E)},z=function(r){return r.filter(function(r){return!!r})},D="__id",F=1,G={},J={};return{Bind:m,Watch:A,Model:b}}();