"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var iqwerty=iqwerty||{};iqwerty.binding=function(){function t(t,n){return!!n.find(function(n){return t.tagName.toLowerCase()===n})}function n(e,r,o){o instanceof Array||(o=[o]),n.prototype.setId(e),n.prototype.updateBindings(e[u],r,o,e[r]),n.prototype.updateViews(e[u],r),o.forEach(function(n){t(n,["input","textarea"])&&n.addEventListener("input",function(){e[r]=n.value})}),Object.defineProperty(e,r,{get:function(){return n.prototype.Bindings[e[u]][r].value},set:function(t){n.prototype.Bindings[e[u]][r].value=t,n.prototype.updateViews(e[u],r)},configurable:!0})}function e(t,n){return!!Object.keys(t).find(function(t){return n===t})}function r(t){setTimeout(function(){var r=document.querySelectorAll("["+p+"]");0!==r.length&&([].slice.call(r).forEach(function(r){var o=r.dataset.iqBind;if(o=new RegExp(l).exec(o)){var i=o[1];if(e(t,i)){var u=t[i];n(u,o[2],r),o=null,i=null,u=null}}}),r=null)},0)}function o(t){setTimeout(function(){var r=document.querySelectorAll("["+d+"]");0!==r.length&&([].slice.call(r).forEach(function(r){var o=r.dataset.iqBindScope,i="{ *?"+(o?a:l)+" *?}";i=new RegExp(i,"g");var u,p=[];do if(u=i.exec(r.innerHTML)){var d=o||u[1];if(!e(t,d))return;p.push({matched:u[0],obj:d,prop:(o?u[1]:u[2]).trim(),id:c+"-"+n.prototype.getId()})}while(u);if(u=null,0!==p.length){var f=r.innerHTML;p.forEach(function(t){var n=document.createElement("span");n.classList.add(c),n.id=t.id,f=f.replace(t.matched,n.outerHTML),n=null}),r.innerHTML=f,f=null,p.forEach(function(e){var r=t[e.obj],o=document.getElementById(e.id);n(r,e.prop,o),o.removeAttribute("id"),r=null,o=null})}o=null,i=null,p=null}),r=null)},0)}function i(t){Object.keys(t).forEach(function(e){n.prototype.setId(t[e]),n.prototype.addBinding(t[e])}),r(t),o(t)}var u="$$id",a="([^.}]+)",l=a+"."+a,p="data-iq-bind",d="data-iq-bind-scope",c="iq-bind";return n.prototype.Bindings={},n.prototype.addBinding=function(t){var e=n.prototype.Bindings;e[t[u]]||(e[t[u]]={},e=null)},n.prototype.updateBindings=function(t,e,r,o){var i,u=n.prototype.Bindings;u[t]||(u[t]={}),u[t][e]||(u[t][e]={elems:[],value:o}),(i=u[t][e].elems).push.apply(i,_toConsumableArray(r)),u=null},n.prototype.updateViews=function(e,r){var o,i=n.prototype.Bindings[e][r].elems;i.forEach(function(i){o=t(i,["input","textarea"])?"value":"innerHTML",i[o]=n.prototype.Bindings[e][r].value}),i=null,o=null},n.prototype._id=0,n.prototype.getId=function(){return n.prototype._id++},n.prototype.setId=function(t){null==t[u]&&Object.defineProperty(t,u,{value:n.prototype.getId()})},{Bind:n,Model:i}}();